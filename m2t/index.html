

function malfunc(){

let txt = document.getElementById("txt").value; 
let x = txt.indexOf("‍");
while(x>-1){
if(txt[x-2]==="ರ" && txt[x-1]==="್"){
txt = txt.slice(0,x-2) + "ರX್" + txt.slice(x+1);
x = txt.indexOf("‍");
}else{
txt = txt.slice(0,x) + "X" + txt.slice(x+1);
x = txt.indexOf("‍");
}
}

let sp = document.getElementById("spcl");

if (sp.checked == true){

let j = txt.indexOf("െV"); 
while (j > -1) { 
if(txt[j-4]==="ര" && txt[j-3]==="X" && txt[j-2]==="്"){
txt = txt.slice(0, j - 4) + "o" + txt.slice(j - 4, j) + txt.slice(j + 2);
j = txt.indexOf("െV"); 
}else{
if (txt[j - 4] === "്" && txt[j - 2] === "്") { 
txt = txt.slice(0, j - 5) + "o" + txt.slice(j - 5, j) + txt.slice(j + 2);
j = txt.indexOf("െV"); 
} else { 
if (txt[j - 2] === "്") { 
txt = txt.slice(0, j - 3) + "o" + txt.slice(j - 3, j) + txt.slice(j + 2); 
j= txt.indexOf("െV"); 
} else { 
txt = txt.slice(0, j - 1) + "o" + txt[j - 1] + txt.slice(j + 2); 
j = txt.indexOf("െV"); 
}
} 
}
}


let J = txt.indexOf("േV"); 
while (J > -1) {
 if(txt[J-4]==="ര" && txt[J-3]==="X" && txt[J-2]==="്"){
txt = txt.slice(0, J - 4) + "O" + txt.slice(J - 4, J) + txt.slice(J + 2);
J = txt.indexOf("േV"); 
}else{
if (txt[J - 4] === "്" && txt[J - 2] === "്") { 
txt = txt.slice(0, J - 5) + "O" + txt.slice(J - 5, J) + txt.slice(J + 2);
J = txt.indexOf("േV"); 
} else { 
if (txt[J - 2] === "്") { 
txt = txt.slice(0, J - 3) + "O" + txt.slice(J - 3, J) + txt.slice(J + 2); 
J= txt.indexOf("േV"); 
} else { 
txt = txt.slice(0, J - 1) + "O" + txt[J - 1] + txt.slice(J + 2); 
J = txt.indexOf("േV"); 
}
} 
} }

txt = txt.replace(/എV/g, "oA").replace(/ഏV/g, "OA").replace(/ ുV/g, "uAX");

}


let e = txt.indexOf("െ"); 
while (e > -1) { 
if(txt[e-4]==="ര" && txt[e-3]==="X" && txt[e-2]==="്"){
txt = txt.slice(0, e - 4) + "e" + txt.slice(e - 4, e) + txt.slice(e + 1);
e = txt.indexOf("െ"); 
}else{
if (txt[e - 4] === "്" && txt[e - 2] === "്") { 
txt = txt.slice(0, e - 5) + "e" + txt.slice(e - 5, e) + txt.slice(e + 1);
e = txt.indexOf("െ"); 
} else { 
if (txt[e - 2] === "്") { 
txt = txt.slice(0, e - 3) + "e" + txt.slice(e - 3, e) + txt.slice(e + 1); 
e = txt.indexOf("െ"); } else { 
txt = txt.slice(0, e - 1) + "e" + txt[e - 1] + txt.slice(e + 1); 
e = txt.indexOf("െ"); 
}
} 
} }


let E = txt.indexOf("േ"); 
while (E > -1) { 
if(txt[E-4]==="ര" && txt[E-3]==="X" && txt[E-2]==="്"){
txt = txt.slice(0, E - 4) + "E" + txt.slice(E - 4, E) + txt.slice(E + 1);
E = txt.indexOf("േ"); 
}else{
if (txt[E - 4] === "്" && txt[E - 2] === "്") { 
txt = txt.slice(0, E - 5) + "E" + txt.slice(E - 5, E) + txt.slice(E + 1);
E = txt.indexOf("േ"); 
} else { 
if (txt[E - 2] === "്") { 
txt = txt.slice(0, E - 3) + "E" + txt.slice(E - 3, E) + txt.slice(E + 1); 
E = txt.indexOf("േ"); } else { 
txt = txt.slice(0, E - 1) + "E" + txt[E - 1] + txt.slice(E + 1); 
E = txt.indexOf("േ"); 
}
} 
} }





let g = txt.indexOf("ൊ");

while (g > -1) {
if(txt[g-4]==="ര" && txt[g-3]==="X" && txt[g-2]==="്"){
txt = txt.slice(0, g - 4) + "e" + txt.slice(g - 4, g) + "a" + txt.slice(g + 1);
g = txt.indexOf("ൊ"); 
}else{
if (txt[g - 4] === "്" && txt[g - 2] === "്") {
txt = txt.slice(0, g - 5) + "e" + txt.slice(g - 5, g) + "a" + txt.slice(g + 1);
g = txt.indexOf("ൊ");
} else {
if (txt[g - 4] !== "್" && txt[g - 2] === "്") {
txt = txt.slice(0, g - 3) + "e" + txt.slice(g - 3, g) + "a" + txt.slice(g + 1);
g = txt.indexOf("ൊ");
} else {
txt = txt.slice(0, g - 1) + "e" + txt.slice(g - 1, g) + "a" + txt.slice(g + 1);
g = txt.indexOf("ൊ");
}
}
}}

let G = txt.indexOf("ോ");

while (G > -1) {
if(txt[G-4]==="ര" && txt[G -3]==="X" && txt[G-2]==="്"){
txt = txt.slice(0, G - 4) + "F" + txt.slice(G - 4, G) + "a" + txt.slice(G + 1);
G = txt.indexOf("ോ"); 
}else{
if (txt[G - 4] === "്" && txt[G - 2] === "്") {
txt = txt.slice(0, G - 5) + "F" + txt.slice(G - 5, G) + "a" + txt.slice(G + 1);
G = txt.indexOf("ോ");
} else {
if (txt[G - 4] !== "്" && txt[G - 2] === "്") {
txt = txt.slice(0, G - 3) + "F" + txt.slice(G - 3, G) + "a" + txt.slice(G + 1);
G = txt.indexOf("ോ");
} else {
txt = txt.slice(0, G - 1) + "F" + txt.slice(G - 1, G) + "a" + txt.slice(G + 1);
G = txt.indexOf("ോ");
}
}
}}


let f = txt.indexOf("ൈ"); 
while (f > -1) { 
if(txt[f-4]==="ര" && txt[f-3]==="X" && txt[f-2]==="്"){
txt = txt.slice(0, f - 4) + "eXe" + txt.slice(f - 4, f) + txt.slice(f + 1);
f = txt.indexOf("ൈ"); 
}else{
if (txt[f - 4] === "്" && txt[f - 2] === "്") { 
txt = txt.slice(0, f - 5) + "eXe" + txt.slice(f - 5, f) + txt.slice(f + 1);
f = txt.indexOf("ൈ"); 
} else { 
if (txt[f - 2] === "്") { 
txt = txt.slice(0, f - 3) + "eXe" + txt.slice(f - 3, f) + txt.slice(f + 1); 
f = txt.indexOf("ൈ"); } else { 
txt = txt.slice(0, f - 1) + "eXe" + txt[f - 1] + txt.slice(f + 1); 
f = txt.indexOf("ൈ"); 
}
} 
} }



let H = txt.indexOf("ര്");
let ra2 = txt[H+2];
while (H > -1){
if (/ക|ഖ|ഗ|ഘ|ങ|ച|ഛ|ജ|ഝ|ഞ|ട|ഠ|ഡ|ഢ|ണ|ത|ഥ|ദ|ധ|ന|പ|ഫ|ബ|ഭ|മ|യ|ല|വ|ശ|ഷ|സ|ഹ|ള/.test(ra2) && txt[H-1] !== "്"){
txt = txt.slice(0, H) + txt[H + 2] + "f" + txt.slice(H + 3);
H = txt.indexOf("ര്");
ra2 = txt[H+2];
}else{
txt = txt.replace("ര്", "rA");
H = txt.indexOf("ര്");
ra2 = txt[H+2];
}
}






let rep = txt.replace(/അ/g, "XAA").replace(/ആ/g, "XAa").replace(/ഇ/g, "XAi").replace(/ഈ/g, "XAI").replace(/ഉ/g, "XAu").replace(/ഊ/g, "XAU").replace(/ഋ/g, "XAR").replace(/ൠ/g, "XARR").replace(/ൄ/g, "RR").replace(/എ/g, "eA").replace(/ഏ/g, "EA").replace(/ഐ/g, "eeA").replace(/ഒ/g, "eAa").replace(/ഓ/g, "FAa").replace(/ഔ/g, "AY").replace(/ൗ/g, "Y").replace(/ം/g, "M").replace(/ഃ/g, "H").replace(/ക/g, "k").replace(/ഖ/g, "K").replace(/ഗ/g, "g").replace(/ഘ/g, "G").replace(/ങ/g, "Z").replace(/ച/g, "c").replace(/ഛ/g, "C").replace(/ജ/g, "j").replace(/ഝ/g, "J").replace(/ഞ/g, "z").replace(/ട/g, "q").replace(/ഠ/g, "Q").replace(/ഡ/g, "w").replace(/ഢ/g, "W").replace(/ണ/g, "N").replace(/ത/g, "t").replace(/ഥ/g, "T").replace(/ദ/g, "d").replace(/ധ/g, "D").replace(/ന/g, "n").replace(/പ/g, "p").replace(/ഫ/g, "P").replace(/ബ/g, "b").replace(/ഭ/g, "B").replace(/മ/g, "m").replace(/യ/g, "y").replace(/ര/g, "r").replace(/ല/g, "l").replace(/വ/g, "v").replace(/ശ/g, "S").replace(/ഷ/g, "x").replace(/സ/g, "s").replace(/ഹ/g, "h").replace(/ള/g, "L").replace(/്/g, "A").replace(/ാ/g, "a").replace(/ു/g, "u").replace(/ൂ/g, "U").replace(/ൈ/g, "Y").replace(/ി/g, "i").replace(/ീ/g, "I").replace(/ൃ/g, "R").replace(/‍/g, "X").replace(/‌/g, "X"); 
rep = rep.replace(/eXee/g, "eXe");
document.getElementById("resu").value = rep;
}



